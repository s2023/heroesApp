import{A as j,B as Ae,C as je,D as Ve,E as Re,F as $e,G as Ue,H as Oe,I as qe,J as Ge,K as ze,L as V,M as Je,N as Ke,O as re,P as Qe,Q as We,R as Xe,S as Ye,T as Ze,U as et,V as tt,W as it,a as K,b as x,c as ye,d as Q,e as W,f as T,g as X,h as Y,i as Ee,j as we,k as I,l as ke,m as He,n as Te,o as Fe,p as Pe,q as De,r as Z,s as Le,t as Ne,u as B,v as ee,w as A,x as te,y as Be,z as ie}from"./chunk-C5DU5TTE.js";import{Aa as b,Ba as S,Ca as o,Da as i,E as U,Ea as c,Ga as H,K as be,Ka as h,L as O,Ma as v,N as Se,P as f,Pa as D,Q as q,Qa as a,Ra as C,S as xe,Sa as p,U as y,V as E,Va as pe,Wa as L,Xa as N,da as P,i as le,ia as m,ja as u,k as Ce,mb as Ie,qb as G,r as se,ra as d,rb as Me,sb as z,t as ce,tb as J,vb as de,x as _e,xa as w,ya as k,za as _}from"./chunk-SKF6SEV7.js";function ht(t,e){if(t&1){let s=H();o(0,"mat-list-item",9),h("click",function(){y(s),v();let n=D(2);return E(n.toggle())}),o(1,"mat-icon",10),a(2),i(),a(3),i()}if(t&2){let s=e.$implicit;d("routerLink",s.url),m(2),C(s.icon),m(1),p(" ",s.label," ")}}var rt=(()=>{let e=class e{constructor(){this.sidebarItems=[{label:"List",icon:"label",url:"./list"},{label:"Add",icon:"add",url:"./new-hero"},{label:"Search",icon:"search",url:"./search"}]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=f({type:e,selectors:[["heroes-layout-page"]],decls:25,vars:0,consts:[["fullscreen",""],["mode","push",1,"side-nav"],["sidenav",""],[1,"spacer"],["mat-icon-button","",3,"click"],["color","primary"],["mat-raised-button","","color","primary",2,"background-color","#6b7acf"],["routerLink","/auth/login"],[1,"container","p-2"],[3,"routerLink","click"],["matListItemIcon",""],[3,"routerLink"]],template:function(n,l){if(n&1){let g=H();o(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"mat-toolbar")(4,"span"),a(5,"Men\xFA"),i(),c(6,"span",3),o(7,"button",4),h("click",function(){y(g);let me=D(2);return E(me.toggle())}),o(8,"mat-icon"),a(9,"menu"),i()()(),o(10,"mat-nav-list"),b(11,ht,4,3,"mat-list-item",11,_),i()(),o(13,"mat-toolbar",5)(14,"button",4),h("click",function(){y(g);let me=D(2);return E(me.toggle())}),o(15,"mat-icon"),a(16,"menu"),i()(),c(17,"span",3),o(18,"button",6)(19,"mat-icon"),a(20,"logout"),i(),o(21,"a",7),a(22,"Logout"),i()()(),o(23,"div",8),c(24,"router-outlet"),i()()}n&2&&(m(11),S(l.sidebarItems))},dependencies:[Me,J,x,ye,T,Qe,re,Je,Ye,Ze,tt],styles:[".side-nav[_ngcontent-%COMP%]{width:30%}"]});let t=e;return t})();var fe=function(t){return t.DCComics="DC Comics",t.MarvelComics="Marvel Comics",t}(fe||{});var ot=(()=>{let e=class e{constructor(r,n){this.dialogRef=r,this.data=n}onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}};e.\u0275fac=function(n){return new(n||e)(u(Ve),u(Re))},e.\u0275cmp=f({type:e,selectors:[["app-confirm-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],[1,"spacer"],["mat-raised-button","","color","warn","cdkFocusInitial","",3,"click"]],template:function(n,l){n&1&&(o(0,"h1",0),a(1,"Are you sure?"),i(),o(2,"div",1)(3,"p"),a(4),i()(),o(5,"div",2)(6,"button",3),h("click",function(){return l.onCancel()}),a(7,"No Thanks"),i(),c(8,"span",4),o(9,"button",5),h("click",function(){return l.onConfirm()}),a(10,"Ok"),i()()),n&2&&(m(4),p("This process is not reversible, it is about to eliminate ",l.data.superhero,"."))},dependencies:[x,Ue,qe,Oe],encapsulation:2});let t=e;return t})();var nt={baseUrl:"https://s2023.github.io/heroesApp"};var F=(()=>{let e=class e{constructor(r){this.http=r,this.baseUrl=nt.baseUrl}getHeroes(){return this.http.get(`${this.baseUrl}/heroes`)}getHeroById(r){return this.http.get(`${this.baseUrl}/heroes/${r}`).pipe(ce(n=>le(void 0)))}getSuggestions(r){return this.http.get(`${this.baseUrl}/heroes?q=${r}&_limit=6`)}addHero(r){return this.http.post(`${this.baseUrl}/heroes`,r)}updateHero(r){if(!r.id)throw Error("Hero id is required");return this.http.patch(`${this.baseUrl}/heroes/${r.id}`,r)}deleteHeroById(r){return this.http.delete(`${this.baseUrl}/heroes/${r}`).pipe(Ce(n=>!0),ce(n=>le(!1)))}};e.\u0275fac=function(n){return new(n||e)(Se(Ie))},e.\u0275prov=be({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var R=(()=>{let e=class e{transform(r){return!r.id&&!r.alt_img?"assets/no-image.png":r.alt_img?r.alt_img:`assets/heroes/${r.id}.jpg`}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=xe({name:"heroImage",type:e,pure:!0});let t=e;return t})();function bt(t,e){if(t&1&&(o(0,"small"),a(1),i()),t&2){let s=v();m(1),C(s.currentHero.superhero)}}function St(t,e){if(t&1){let s=H();o(0,"button",16),h("click",function(){y(s);let n=v();return E(n.goBack())}),a(1," Cancel/Go back "),o(2,"mat-icon"),a(3,"undo"),i()()}}function xt(t,e){if(t&1&&(o(0,"mat-option",17),a(1),i()),t&2){let s=e.$implicit;d("value",s.id),m(1),p(" ",s.desc," ")}}function It(t,e){if(t&1){let s=H();o(0,"button",18),h("click",function(){y(s);let n=v();return E(n.onDeleteHero())}),o(1,"mat-icon"),a(2,"delete_forever"),i(),a(3," Delete "),i()}}var ve=(()=>{let e=class e{constructor(r,n,l,g,$){this.heroesService=r,this.activatedRoute=n,this.router=l,this.snackbar=g,this.dialog=$,this.heroForm=new we({id:new I(""),superhero:new I("",{nonNullable:!0}),publisher:new I(fe.DCComics),alter_ego:new I(""),first_appearance:new I(""),characters:new I(""),alt_img:new I("")}),this.publishers=[{id:"DC Comics",desc:"DC - Comics"},{id:"Marvel Comics",desc:"Marvel - Comics"}]}get currentHero(){return this.heroForm.value}ngOnInit(){this.router.url.includes("edit")&&this.activatedRoute.params.pipe(U(({id:r})=>this.heroesService.getHeroById(r))).subscribe(r=>{if(!r)return this.router.navigateByUrl("/");this.heroForm.reset(r)})}onSubmit(){if(!this.heroForm.invalid){if(this.currentHero.id){this.heroesService.updateHero(this.currentHero).subscribe(r=>{this.showSnackbar(`${r.superhero} updated!`)});return}this.heroesService.addHero(this.currentHero).subscribe(r=>{this.router.navigate(["/heroes/edit",r.id]),this.showSnackbar(`${r.superhero} created!`)})}}onDeleteHero(){if(!this.currentHero.id)throw Error("Hero id is required");this.dialog.open(ot,{data:this.heroForm.value}).afterClosed().pipe(se(n=>n),U(()=>this.heroesService.deleteHeroById(this.currentHero.id)),se(n=>n)).subscribe(()=>{this.router.navigate(["/heroes"])})}showSnackbar(r){this.snackbar.open(r,"done",{duration:2500})}goBack(){this.router.navigateByUrl("heroes/list")}};e.\u0275fac=function(n){return new(n||e)(u(F),u(G),u(z),u(et),u($e))},e.\u0275cmp=f({type:e,selectors:[["heroes-new-page"]],decls:48,vars:9,consts:[[1,"flex","justify-content-between"],["mat-button","","color","warn"],[1,"mb-2"],[1,"grid"],[1,"col-12","sm:col-6"],[1,"grid",3,"formGroup","ngSubmit"],["matInput","","type","text","required","","formControlName","superhero"],["matInput","","type","text","required","","formControlName","alter_ego"],[1,"col-12"],["matInput","","type","text","required","","formControlName","first_appearance"],["matInput","","type","text","required","","formControlName","characters"],["formControlName","publisher","required",""],["matInput","","type","text","formControlName","alt_img"],["mat-flat-button","","color","warn"],["mat-flat-button","","color","primary",3,"click"],["mat-card-image","","alt","hero image","title","hero name",3,"src"],["mat-button","","color","warn",3,"click"],[3,"value"],["mat-flat-button","","color","warn",3,"click"]],template:function(n,l){n&1&&(o(0,"div",0)(1,"h1"),a(2),w(3,bt,2,1,"small"),i(),w(4,St,4,0,"button",1),i(),c(5,"mat-divider",2),o(6,"div",3)(7,"div",4)(8,"mat-card")(9,"mat-card-content")(10,"form",5),h("ngSubmit",function(){return l.onSubmit()}),o(11,"mat-form-field",4)(12,"mat-label"),a(13,"Superhero Name"),i(),c(14,"input",6),i(),o(15,"mat-form-field",4)(16,"mat-label"),a(17,"Alter ego"),i(),c(18,"input",7),i(),o(19,"mat-form-field",8)(20,"mat-label"),a(21,"First appearance"),i(),c(22,"input",9),i(),o(23,"mat-form-field",8)(24,"mat-label"),a(25,"Characters"),i(),c(26,"input",10),i(),o(27,"mat-form-field",8)(28,"mat-label"),a(29,"Publisher"),i(),o(30,"mat-select",11),b(31,xt,2,2,"mat-option",17,_),i()(),o(33,"mat-form-field",8)(34,"mat-label"),a(35,"Alternative Image"),i(),c(36,"input",12),i()(),o(37,"div",0),w(38,It,4,0,"button",13),c(39,"span"),o(40,"button",14),h("click",function(){return l.onSubmit()}),o(41,"mat-icon"),a(42,"save"),i(),a(43),i()()()()(),o(44,"div",4)(45,"mat-card"),c(46,"img",15),L(47,"heroImage"),i()()()),n&2&&(m(2),p(" ",l.currentHero.id?"Edit":"Add"," hero: "),m(1),k(3,l.currentHero.id?3:-1),m(1),k(4,l.currentHero.id?4:-1),m(6),d("formGroup",l.heroForm),m(21),S(l.publishers),m(7),k(38,l.currentHero.id?38:-1),m(5),p(" ",l.currentHero.id?"Update":"Create"," "),m(3),d("src",N(47,7,l.currentHero),P))},dependencies:[K,x,B,A,j,W,Q,T,Z,V,Xe,ke,X,Y,Ee,Pe,Te,Fe,R],encapsulation:2});let t=e;return t})();function Mt(t,e){if(t&1&&(o(0,"mat-chip"),a(1),i()),t&2){let s=e.$implicit;m(1),p(" ",s," ")}}var yt=t=>["/heroes/edit",t],Et=t=>["/heroes",t],ae=(()=>{let e=class e{ngOnInit(){if(!this.hero)throw Error("Hero property is required")}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=f({type:e,selectors:[["heroes-hero-card"]],inputs:{hero:"hero"},decls:30,vars:15,consts:[["mat-card-image","",3,"src","alt","title"],[1,"mt-2"],["mat-button","","mat-raised","","color","primary",3,"routerLink"],[1,"spacer"],["mat-button","","mat-raised","",3,"routerLink"]],template:function(n,l){n&1&&(o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),a(3),i(),o(4,"mat-card-subtitle"),a(5),i()(),c(6,"img",0),L(7,"heroImage"),o(8,"mat-card-content",1)(9,"h4"),a(10),i(),o(11,"p")(12,"strong"),a(13,"First appearance"),i(),a(14),c(15,"br"),o(16,"mat-chip-listbox"),b(17,Mt,2,1,"mat-chip",null,_),i()()(),c(19,"mat-divider"),o(20,"mat-card-actions")(21,"button",2)(22,"mat-icon"),a(23,"edit"),i(),a(24," Edit "),i(),c(25,"span",3),o(26,"button",4)(27,"mat-icon"),a(28,"more_horiz"),i(),a(29," More info "),i()()()),n&2&&(m(3),C(l.hero.superhero),m(2),C(l.hero.alter_ego),m(1),d("src",N(7,9,l.hero),P)("alt",l.hero.superhero)("title",l.hero.superhero),m(4),C(l.hero.publisher),m(4),p(" ",l.hero.first_appearance," "),m(3),S(l.hero.characters.split(",").slice(0,3)),m(4),d("routerLink",pe(11,yt,l.hero.id)),m(5),d("routerLink",pe(13,Et,l.hero.id)))},dependencies:[J,x,B,Be,A,ie,j,te,ee,Ae,je,T,V,R],encapsulation:2});let t=e;return t})();function wt(t,e){if(t&1&&(o(0,"mat-option",6),a(1),i()),t&2){let s=e.$implicit;d("value",s),m(1),p(" ",s.superhero," ")}}function kt(t,e){if(t&1&&(o(0,"mat-option",4),a(1),i()),t&2){let s=v();m(1),p(" No se encontr\xF3 nada con el t\xE9rmino ",s.searchInput.value," ")}}function Ht(t,e){if(t&1&&(o(0,"div",7),c(1,"heroes-hero-card",8),i()),t&2){let s=v();m(1),d("hero",s.selectedHero)}}var st=(()=>{let e=class e{constructor(r){this.heroesService=r,this.searchInput=new I(""),this.heroes=[]}searchHero(){let r=this.searchInput.value||"";this.heroesService.getSuggestions(r).subscribe(n=>this.heroes=n)}onSelectedOption(r){if(!r.option.value){this.selectedHero=void 0;return}let n=r.option.value;this.searchInput.setValue(n.superhero),this.selectedHero=n}};e.\u0275fac=function(n){return new(n||e)(u(F))},e.\u0275cmp=f({type:e,selectors:[["heroes-search-page"]],decls:13,vars:4,consts:[[1,"flex","flex-column","p-2"],["type","text","title","Search Heroes","matInput","",3,"formControl","matAutocomplete","input"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],["value",""],["class","col-12 sm:col-4 md:col-3 xl:col-2"],[3,"value"],[1,"col-12","sm:col-4","md:col-3","xl:col-2"],[3,"hero"]],template:function(n,l){if(n&1&&(o(0,"div",0)(1,"h3"),a(2,"Search"),i(),o(3,"mat-form-field")(4,"mat-label"),a(5,"Search Heroes"),i(),o(6,"input",1),h("input",function(){return l.searchHero()}),i(),o(7,"mat-autocomplete",2,3),h("optionSelected",function($){return l.onSelectedOption($)}),b(9,wt,2,2,"mat-option",6,_),w(11,kt,2,1,"mat-option",4),i()(),w(12,Ht,2,1,"div",5),i()),n&2){let g=D(8);m(6),d("formControl",l.searchInput)("matAutocomplete",g),m(3),S(l.heroes),m(2),k(11,l.heroes.length===0&&l.searchInput.value&&l.searchInput.value.length>0?11:-1),m(1),k(12,l.selectedHero?12:-1)}},dependencies:[Le,K,Ne,W,Q,Z,X,Y,He,ae],encapsulation:2});let t=e;return t})();function Tt(t,e){if(t&1&&(o(0,"div",1),c(1,"heroes-hero-card",2),i()),t&2){let s=e.$implicit;m(1),d("hero",s)}}var ct=(()=>{let e=class e{constructor(r){this.heroesService=r,this.heroes=[]}ngOnInit(){this.heroesService.getHeroes().subscribe(r=>this.heroes=r)}};e.\u0275fac=function(n){return new(n||e)(u(F))},e.\u0275cmp=f({type:e,selectors:[["heroes-list-page"]],decls:6,vars:0,consts:[[1,"grid","bm-8","pt-2"],[1,"col-12","sm:col-4","md:col-3","xl:col-2"],[3,"hero"],["class","col-12 sm:col-4 md:col-3 xl:col-2"]],template:function(n,l){n&1&&(o(0,"h1"),a(1,"Heroes List"),i(),c(2,"mat-divider"),o(3,"div",0),b(4,Tt,2,1,"div",3,_),i()),n&2&&(m(4),S(l.heroes))},dependencies:[V,ae],encapsulation:2});let t=e;return t})();function Ft(t,e){if(t&1){let s=H();o(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),a(4),i(),o(5,"mat-card-subtitle"),a(6),i()(),c(7,"img",3),L(8,"heroImage"),i(),o(9,"mat-card",2)(10,"mat-card-header")(11,"mat-card-title"),a(12,"Hero Information"),i(),o(13,"mat-card-subtitle"),a(14),i()(),o(15,"mat-card-content")(16,"mat-list")(17,"mat-list-item")(18,"em"),a(19,"- First appearance: "),i(),a(20),i(),o(21,"mat-list-item")(22,"div",4)(23,"em"),a(24,"- Characters: "),i(),a(25),i()(),o(26,"mat-list-item")(27,"em"),a(28,"- Publisher: "),i(),a(29),i(),o(30,"mat-list-item")(31,"em"),a(32,"- Alter ego: "),i(),a(33),i()(),o(34,"button",5),h("click",function(){y(s);let n=v();return E(n.goBack())}),o(35,"mat-icon"),a(36,"undo"),i(),a(37," Go back "),i()()()()}if(t&2){let s=v();m(4),C(s.hero.superhero),m(2),C(s.hero.alter_ego),m(1),d("src",N(8,10,s.hero),P)("alt",s.hero.superhero)("title",s.hero.superhero),m(7),C(s.hero.superhero),m(6),p("",s.hero.first_appearance,"."),m(5),p("",s.hero.characters,"."),m(4),p("",s.hero.publisher,"."),m(4),p("",s.hero.alter_ego,".")}}function Pt(t,e){t&1&&(o(0,"mat-grid-list",6)(1,"mat-grid-tile"),c(2,"mat-spinner"),i()())}var pt=(()=>{let e=class e{constructor(r,n,l){this.heroesService=r,this.activatedRoute=n,this.router=l}ngOnInit(){this.activatedRoute.params.pipe(_e(2e3),U(({id:r})=>this.heroesService.getHeroById(r))).subscribe(r=>{if(!r)return this.router.navigate(["/heroes/list"]);this.hero=r})}goBack(){this.router.navigateByUrl("heroes/list")}};e.\u0275fac=function(n){return new(n||e)(u(F),u(G),u(z))},e.\u0275cmp=f({type:e,selectors:[["heroes-hero-page"]],decls:2,vars:1,consts:[["class","grid p-2"],[1,"grid","p-2"],[1,"col-12","sm:col-6"],["mat-card-image","",3,"src","alt","title"],[1,"hero-char"],["mat-button","","color","warn",3,"click"],["cols","1"]],template:function(n,l){n&1&&w(0,Ft,38,12,"div",0)(1,Pt,3,0),n&2&&k(0,l.hero?0:1)},dependencies:[x,B,A,ie,j,te,ee,ze,Ge,T,Ke,re,We,R],styles:[".hero-char[_ngcontent-%COMP%]{white-space:pre-line}"]});let t=e;return t})();var Dt=[{path:"",component:rt,children:[{path:"new-hero",component:ve},{path:"search",component:st},{path:"edit/:id",component:ve},{path:"list",component:ct},{path:":id",component:pt},{path:"**",redirectTo:"list"}]}],dt=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=q({type:e}),e.\u0275inj=O({imports:[de.forChild(Dt),de]});let t=e;return t})();var Pi=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=q({type:e}),e.\u0275inj=O({imports:[dt,it,De]});let t=e;return t})();export{Pi as HeroesModule};
